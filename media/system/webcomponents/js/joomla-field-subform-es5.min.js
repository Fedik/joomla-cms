!function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r||t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();!function(t){function e(t,e){var r;["matches","msMatchesSelector"].some(function(t){return!("function"!=typeof document.body[t]||(r=t,0))});for(var n;t;){if((n=t.parentElement)&&n[r](e))return n;t=n}return null}var r=function(t){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":n(e))&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,HTMLElement),o(r,[{key:"connectedCallback",value:function(){var t=this;if(this.containerWithRows=this,this.rowsContainer)for(var r=this.querySelectorAll(this.rowsContainer),n=0,o=r.length;n<o;n++)if(e(r[n],"joomla-field-subform")===this){this.containerWithRows=r[n];break}this.lastRowNum=this.getRows().length,this.template="",this.prepareTemplate(),this.addEventListener("click",function(r){var n=e(r.target,t.buttonAdd),o=e(r.target,t.buttonRemove);if(n&&e(n,"joomla-field-subform")===t){var i=e(n,t.repeatableElement);this.addRow(i)}else if(o&&e(o,"joomla-field-subform")===t){var a=e(o,t.repeatableElement);this.removeRow(a)}}),this.buttonMove&&new Sortable.default(this.containerWithRows,{draggable:this.repeatableElement,handle:this.buttonMove})}},{key:"getRows",value:function(){for(var t=this.containerWithRows.children,e=document.body.msMatchesSelector?"msMatchesSelector":"matches",r=[],n=0,o=t.length;n<o;n++)t[n][e](this.repeatableElement)&&r.push(t[n]);return result}},{key:"prepareTemplate",value:function(){var t=[].slice.call(this.children).filter(function(t){return t.classList.contains("subform-repeatable-template-section")});if(t[0]&&(this.template=t[0].innerHTML),!this.template)throw new Error("The row template are required to subform element to work")}},{key:"addRow",value:function(t){var e=this.getRows().length;if(e>=this.maximum)return null;var r;(r="TBODY"===this.containerWithRows.nodeName||"TABLE"===this.containerWithRows.nodeName?document.createElement("tbody"):document.createElement("div")).innerHTML=this.template;var n=r.children[0];return t?t.parentNode.insertBefore(n,t.nextSibling):this.containerWithRows.append(n),n.setAttribute("data-new","1"),this.fixUniqueAttributes(n,e),this.dispatchEvent(new CustomEvent("subform-row-add",{detail:{row:n},bubbles:!0})),window.Joomla&&Joomla.Event.dispatch(n,"joomla:updated"),n}},{key:"removeRow",value:function(t){this.getRows().length<=this.minimum||(this.dispatchEvent(new CustomEvent("subform-row-remove",{detail:{row:t},bubbles:!0})),window.Joomla&&Joomla.Event.dispatch(t,"joomla:removed"),t.parentNode.removeChild(t))}},{key:"fixUniqueAttributes",value:function(t,r){this.lastRowNum++,r=r||0;var n=t.getAttribute("data-group"),o=t.getAttribute("data-base-name"),i=Math.max(this.lastRowNum,r+1),a=o+i;this.lastRowNum=i,t.setAttribute("data-group",a);for(var u=t.querySelectorAll("[name]"),l={},s=0,c=u.length;s<c;s++){var f=u[s],m=f.getAttribute("name"),b=m.replace(/(\[\]$)/g,"").replace(/(\]\[)/g,"__").replace(/\[/g,"_").replace(/\]/g,""),h=m.replace("["+n+"][","["+a+"]["),d=b.replace(n,a),p=0,v=b;if("checkbox"===f.type&&m.match(/\[\]$/)){if(!(p=l[b]?l[b].length:0)){var y=e(f,"fieldset.checkboxes"),w=t.querySelector('label[for="'+b+'"]');y&&y.setAttribute("id",d),w&&(w.setAttribute("for",d),w.setAttribute("id",d+"-lbl"))}v+=p,d+=p}else if("radio"===f.type){if(!(p=l[b]?l[b].length:0)){var g=e(f,"fieldset.radio"),A=t.querySelector('label[for="'+b+'"]');g&&g.setAttribute("id",d),A&&(A.setAttribute("for",d),A.setAttribute("id",d+"-lbl"))}v+=p,d+=p}l[b]?l[b].push(!0):l[b]=[!0],f.setAttribute("name",h),f.setAttribute("id",d);var E=t.querySelector('label[for="'+v+'"]');E&&(E.setAttribute("for",d),E.setAttribute("id",d+"-lbl"))}}},{key:"buttonAdd",get:function(){return this.getAttribute("button-add")}},{key:"buttonRemove",get:function(){return this.getAttribute("button-remove")}},{key:"buttonMove",get:function(){return this.getAttribute("button-move")}},{key:"rowsContainer",get:function(){return this.getAttribute("rows-container")}},{key:"repeatableElement",get:function(){return this.getAttribute("repeatable-element")}},{key:"minimum",get:function(){return this.getAttribute("minimum")}},{key:"maximum",get:function(){return this.getAttribute("maximum")}}]),r}();t.define("joomla-field-subform",r)}(customElements)},{}]},{},[1]);